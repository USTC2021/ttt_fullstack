# javaScript语言精粹 
# 第七章 正则表达式

- 正则表达式
  语言规范
  以方式的形式被用于字符串中信息查找、替换、和提取
  不支持注释和空白

- 7.1 一个例子
  1. 匹配url的正则表达式
    ```匹配url的正则表达式
      let parse_url = /^(?:([a-zA-Z]+):)?(\/{0, 3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;
      let url = "http://www.ora.com:80/goodparts?q#fragment";
      let result = parse_url.exec(url)
      let names = ['url', 'scheme', 'slash', 'host', 'port', 'path', 'query', 'hash'];
      let blanks = ' ';
      for (let i = 0; i < names.length; i++) {
        document.writeln(names[i] + ':' + blanks.substring(names[i].length), result[i])
      }

      <!-- 结果 -->
      url: http://www.ora.com:80/goodparts?q#fragment
      scheme: http
      slash: //
      host: www.ora.com
      port: 80
      path: goodparts
      query: q
      hash: fragment
    ```
    - 协议名 http: (?:([a-zA-Z]+):)?
    - // (\/{0, 3})
      - \/ 表示一个被匹配的斜杠(/)
      - {0, 3} 表示/ 被匹配0次或1-3次
    - 主机名 www.ora.com ([0-9.\-A-Za-z]+) 
      - \- 表示 - 
      - 由1个或多个数字、字母或-组成
    - 端口号 :80 (?::(\d+))?
      - \d 表示一个数字字符
    - (?:\/([^?#]*))?
      - [^?#] 表示这个类包含除?和#之外的所有字符
      - * 表示被匹配0次或多次
      - 以?开始
    - (?:#(.*))?
      - . 匹配除行结束符以外的所有字符
    - $ 表示字符串结束
  2. 匹配数字的正则表达式
    ```匹配数字的正则表达式
      let parse_number = /^-?\d+(?:\.\d*)?(?:e[+\-]?\d+)?$/i
    ```
    - ^ 表示匹配以一个数字开头的字符串
    - i 表示匹配字母时忽略大小写
    - -? 表示这个减号是可选的
    - \d+ 表示可匹配1个或多个数字
      - \d === [0-9]

- 7.2 结构
  - 正则表达式标志
    - g 全局的
    - i 大小写不敏感
    - m 多行 (^和$能匹配行结束符)
  - RegExp 构造器
    接收一个字符串，将它编译成RegExp对象
    - RegExp 对象属性
      - global g被用，值为true
      - ignoreCase i被用，值为true
      - lastIndex 下一次exec匹配开始的索引值，初始值为0
      - multiline m被用，值为true
      - source 正则表达式源代码文本

- 7.3 元素
  - 正则表达式选择
  - 正则表达式序列
    - \ / [ ] ( ) { } ? + * | . ^ $
      若按字面去匹配时必须要用一个 \ 前缀进行转义
      \ 不能使字母或数字字面化
  - 正则表达式转义
    - \f 换页符
    - \n 换行符
    - \r 回车符
    - \t 制表符
    - \d 匹配一个数字 [0-9]
    - \D 与\d相反 [^0-9] 
    - \w [0-9A-Za-z]
    - \W [^0-9A-Za-z]
    - \s Unicode空白符的一个不完全子集
    - \S 与\s相反
    - \b 被指定为一个字边界标志
    - \l 指向分组l所捕获到的文本的一个引用，它能再次被匹配
  - 正则表达式分组
    - 捕获型
      - 被圆括号包围
      - 每个分组都被指定了一个数字
    - 非捕获型
      - 有一个 (?: 
      - 不会干扰捕获型分组的编号
    - 向前正向匹配
      - 有一个 (?= 前缀
      - 匹配后，文本将倒回到它开始的地方
      - 实际上并不匹配任何东西
    - 向前负向匹配
      - 有一个 (?! 前缀
      - 类似于向前正向匹配分组
      - 只有匹配失败时它才进行匹配
  - 正则表达式类
  - 正则表达式类转义
    需要被转义的特殊字符：- / [ \ ] ^
  - 正则表达式量词 一般最好使用贪婪性匹配
    {3, 6} 匹配3、4、5或6次
    {3,} 匹配3次或更多次
    - ? == {0, 1}
    - * == {0, }
    - + == {1, }